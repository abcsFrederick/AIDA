(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[567],{4409:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[...aida]",function(){return n(4970)}])},4970:function(e,t,n){"use strict";n.r(t);var a=n(4051),c=n.n(a),r=n(5893),s=n(7294),o=n(9008),i=n(1163),u=n(9260);function f(e,t,n,a,c,r,s){try{var o=e[r](s),i=o.value}catch(u){return void n(u)}o.done?t(i):Promise.resolve(i).then(a,c)}var l={header:{schemaVersion:"2.0",timestamp:Date.now()},layers:[{id:"Layer 1",features:[]}],classes:[{id:0,name:"Default class",style:{stroke:{color:[51,153,204,1],width:1.25},fill:{color:[255,255,255,.4]}}}]},h="http://localhost:8000/data/",d="http://localhost:8182/iiif/2";t.default=function(){var e=(0,i.useRouter)(),t=e.asPath,n=e.query,a=(0,s.useState)(""),x=a[0],p=a[1],v=(0,s.useState)(""),k=v[0],m=v[1],w=(0,s.useState)("dzi"),_=w[0],b=w[1],g=(0,s.useState)(l),j=g[0],y=g[1],E=(0,s.useState)(!0),N=E[0],P=E[1];return(0,s.useEffect)((function(){m(n.aida?n.aida[n.aida.length-1]:"Image not found")}),[n,e.isReady]),(0,s.useEffect)((function(){var n;(n=c().mark((function n(){var a,r,s,o,i,u,f;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.isReady){n.next=45;break}if(!t.endsWith(".json")){n.next=27;break}return n.next=4,fetch("".concat(h).concat(t));case 4:if(!(a=n.sent).ok){n.next=25;break}return n.next=8,a.json();case 8:return(r=n.sent).image.endsWith(".tiff")?p("".concat(d).concat(r.image)):p("".concat(h).concat(r.image)),b(r.image.split(".")[1]),n.prev=11,n.next=14,fetch("".concat(h).concat(r.annotation));case 14:if(!(s=n.sent).ok){n.next=20;break}return n.next=18,s.json();case 18:o=n.sent,y(o);case 20:n.next=25;break;case 22:n.prev=22,n.t0=n.catch(11),console.error(n.t0);case 25:n.next=44;break;case 27:return t.endsWith(".tiff")?p("".concat(d).concat(t)):p("".concat(h).concat(t)),b(t.split(".")[1]),n.prev=29,i=t.replace(/\.[^.]+$/,".json"),n.next=33,fetch("".concat(h).concat(i));case 33:if(!(u=n.sent).ok){n.next=39;break}return n.next=37,u.json();case 37:f=n.sent,y(f);case 39:n.next=44;break;case 41:n.prev=41,n.t1=n.catch(29),console.error(n.t1);case 44:P(!1);case 45:case"end":return n.stop()}}),n,null,[[11,22],[29,41]])})),function(){var e=this,t=arguments;return new Promise((function(a,c){var r=n.apply(e,t);function s(e){f(r,a,c,s,o,"next",e)}function o(e){f(r,a,c,s,o,"throw",e)}s(void 0)}))})()}),[t,e.isReady]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.default,{children:(0,r.jsx)("title",{children:"".concat(k," - AIDA")})}),!N&&(0,r.jsx)(u.Z,{imageUrl:x,annotationData:j,imageExt:_})]})}},1163:function(e,t,n){e.exports=n(387)}},function(e){e.O(0,[785,801,103,260,774,888,179],(function(){return t=4409,e(e.s=t);var t}));var t=e.O();_N_E=t}]);